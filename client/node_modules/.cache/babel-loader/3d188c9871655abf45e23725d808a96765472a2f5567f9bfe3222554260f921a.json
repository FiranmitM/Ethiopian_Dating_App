{"ast":null,"code":"var _jsxFileName = \"/home/franmit/Downloads/Ethiopia_dating_app/client/src/pages/Chat/ChatBody.js\",\n  _s = $RefreshSig$();\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Typography, Box, Paper } from '@mui/material';\nimport ChatIcon from './ChatIcon';\nimport chatService from '../../services/chatService';\nimport { useEffect } from 'react';\nimport { setMessages } from '../../reducers/messagesReducer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst ChatBody = _ref => {\n  _s();\n  let {\n    connections\n  } = _ref;\n  const profileData = useSelector(state => state.profile);\n  const room = useSelector(state => state.room);\n  const user = useSelector(state => state.user);\n  const messages = useSelector(state => state.messages);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (room !== '') {\n      chatService.getRoomMessages(room).then(data => dispatch(setMessages(data)));\n    }\n  }, [room, dispatch]);\n  if (room === '') return /*#__PURE__*/_jsxDEV(Typography, {\n    variant: \"h4\",\n    align: \"center\",\n    sx: {\n      p: 2\n    },\n    children: \"Find someone to chat to!\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 3\n  }, this);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h5\",\n        children: \"Messages\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 4\n    }, this), messages.map(message => {\n      if (message.name === user.name) {\n        return /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            alignItems: \"flex-start\",\n            justifyContent: 'flex-end',\n            mb: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              width: 3 / 4\n            },\n            children: /*#__PURE__*/_jsxDEV(Paper, {\n              sx: {\n                ml: 1,\n                background: 'rgb(240, 246, 233)'\n              },\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                sx: {\n                  p: 1\n                },\n                children: message.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 49,\n                columnNumber: 10\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 48,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 47,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              ml: 1,\n              mr: 1\n            },\n            children: /*#__PURE__*/_jsxDEV(ChatIcon, {\n              username: message.name,\n              image: profileData === null || profileData === void 0 ? void 0 : profileData.profile_pic['picture_data']\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 53,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 8\n          }, this)]\n        }, message.key, true, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 7\n        }, this);\n      } else {\n        var userFromConnections = connections.find(user => user.username === message.name);\n        if (!userFromConnections) return null;\n        var profile_pic = userFromConnections === null || userFromConnections === void 0 ? void 0 : userFromConnections.picture_data;\n        return /*#__PURE__*/_jsxDEV(Box, {\n          sx: {\n            display: 'flex',\n            alignItems: \"flex-start\",\n            justifyContent: 'flex-start',\n            mb: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              ml: 1\n            },\n            children: /*#__PURE__*/_jsxDEV(ChatIcon, {\n              username: message.name,\n              image: profile_pic\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 67,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 8\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              width: 3 / 4\n            },\n            children: /*#__PURE__*/_jsxDEV(Paper, {\n              sx: {\n                ml: 1,\n                background: 'rgb(233, 240, 243)'\n              },\n              children: /*#__PURE__*/_jsxDEV(Typography, {\n                sx: {\n                  p: 1\n                },\n                children: message.text\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 71,\n                columnNumber: 10\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 8\n          }, this)]\n        }, message.key, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 7\n        }, this);\n      }\n    })]\n  }, void 0, true);\n};\n_s(ChatBody, \"ajtKcdSmTonjYk0eJSqoTsh3q2Y=\", false, function () {\n  return [useSelector, useSelector, useSelector, useSelector, useDispatch];\n});\n_c = ChatBody;\nexport default ChatBody;\nvar _c;\n$RefreshReg$(_c, \"ChatBody\");","map":{"version":3,"names":["useSelector","useDispatch","Typography","Box","Paper","ChatIcon","chatService","useEffect","setMessages","ChatBody","connections","profileData","state","profile","room","user","messages","dispatch","getRoomMessages","then","data","p","map","message","name","display","alignItems","justifyContent","mb","width","ml","background","text","mr","profile_pic","key","userFromConnections","find","username","picture_data"],"sources":["/home/franmit/Downloads/Ethiopia_dating_app/client/src/pages/Chat/ChatBody.js"],"sourcesContent":["import { useSelector, useDispatch } from 'react-redux'\nimport { Typography, Box, Paper } from '@mui/material'\nimport ChatIcon from './ChatIcon'\nimport chatService from '../../services/chatService'\nimport { useEffect } from 'react'\nimport { setMessages } from '../../reducers/messagesReducer'\n\nconst ChatBody = ({ connections }) => {\n\tconst profileData = useSelector(state => state.profile)\n\tconst room = useSelector(state => state.room)\n\tconst user = useSelector(state => state.user)\n\tconst messages = useSelector(state => state.messages)\n\tconst dispatch = useDispatch()\n\n\tuseEffect(() => {\n\t\tif (room !== '') {\n\t\t\tchatService.getRoomMessages(room)\n\t\t\t\t.then(\n\t\t\t\t\tdata => dispatch(setMessages(data),\n\t\t\t\t\t))\n\t\t}\n\t}, [room, dispatch])\n\n\tif (room === '') return (\n\t\t<Typography\n\t\t\tvariant='h4'\n\t\t\talign='center'\n\t\t\tsx={{ p: 2 }}\n\t\t>\n\t\t\tFind someone to chat to!\n\t\t</Typography>\n\t)\n\n\treturn (\n\t\t<>\n\t\t\t<div>\n\t\t\t\t<Typography variant='h5'>Messages</Typography>\n\t\t\t</div>\n\t\t\t{/* //what if no messages? */}\n\t\t\t{messages.map(message => {\n\t\t\t\tif (message.name === user.name) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Box key={message.key} sx={{\n\t\t\t\t\t\t\tdisplay: 'flex', alignItems: \"flex-start\",\n\t\t\t\t\t\t\tjustifyContent: 'flex-end', mb: 1\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t<Box sx={{ width: 3 / 4 }}>\n\t\t\t\t\t\t\t\t<Paper sx={{ ml: 1, background: 'rgb(240, 246, 233)' }}>\n\t\t\t\t\t\t\t\t\t<Typography sx={{ p: 1 }}>{message.text}</Typography>\n\t\t\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<Box sx={{ ml: 1, mr: 1 }}>\n\t\t\t\t\t\t\t\t<ChatIcon username={message.name} image={profileData?.profile_pic['picture_data']} />\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t)\n\t\t\t\t} else {\n\t\t\t\t\tvar userFromConnections = connections.find(user => user.username === message.name)\n\t\t\t\t\tif (!userFromConnections) return null\n\t\t\t\t\tvar profile_pic = userFromConnections?.picture_data\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Box key={message.key} sx={{\n\t\t\t\t\t\t\tdisplay: 'flex', alignItems: \"flex-start\",\n\t\t\t\t\t\t\tjustifyContent: 'flex-start', mb: 1\n\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t<Box sx={{ ml: 1 }}>\n\t\t\t\t\t\t\t\t<ChatIcon username={message.name} image={profile_pic} />\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<Box sx={{ width: 3 / 4 }}>\n\t\t\t\t\t\t\t\t<Paper sx={{ ml: 1, background: 'rgb(233, 240, 243)' }}>\n\t\t\t\t\t\t\t\t\t<Typography sx={{ p: 1 }}>{message.text}</Typography>\n\t\t\t\t\t\t\t\t</Paper>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t})}\n\t\t</>\n\t)\n}\n\nexport default ChatBody\n"],"mappings":";;AAAA,SAASA,WAAW,EAAEC,WAAW,QAAQ,aAAa;AACtD,SAASC,UAAU,EAAEC,GAAG,EAAEC,KAAK,QAAQ,eAAe;AACtD,OAAOC,QAAQ,MAAM,YAAY;AACjC,OAAOC,WAAW,MAAM,4BAA4B;AACpD,SAASC,SAAS,QAAQ,OAAO;AACjC,SAASC,WAAW,QAAQ,gCAAgC;AAAA;AAAA;AAE5D,MAAMC,QAAQ,GAAG,QAAqB;EAAA;EAAA,IAApB;IAAEC;EAAY,CAAC;EAChC,MAAMC,WAAW,GAAGX,WAAW,CAACY,KAAK,IAAIA,KAAK,CAACC,OAAO,CAAC;EACvD,MAAMC,IAAI,GAAGd,WAAW,CAACY,KAAK,IAAIA,KAAK,CAACE,IAAI,CAAC;EAC7C,MAAMC,IAAI,GAAGf,WAAW,CAACY,KAAK,IAAIA,KAAK,CAACG,IAAI,CAAC;EAC7C,MAAMC,QAAQ,GAAGhB,WAAW,CAACY,KAAK,IAAIA,KAAK,CAACI,QAAQ,CAAC;EACrD,MAAMC,QAAQ,GAAGhB,WAAW,EAAE;EAE9BM,SAAS,CAAC,MAAM;IACf,IAAIO,IAAI,KAAK,EAAE,EAAE;MAChBR,WAAW,CAACY,eAAe,CAACJ,IAAI,CAAC,CAC/BK,IAAI,CACJC,IAAI,IAAIH,QAAQ,CAACT,WAAW,CAACY,IAAI,CAAC,CACjC,CAAC;IACL;EACD,CAAC,EAAE,CAACN,IAAI,EAAEG,QAAQ,CAAC,CAAC;EAEpB,IAAIH,IAAI,KAAK,EAAE,EAAE,oBAChB,QAAC,UAAU;IACV,OAAO,EAAC,IAAI;IACZ,KAAK,EAAC,QAAQ;IACd,EAAE,EAAE;MAAEO,CAAC,EAAE;IAAE,CAAE;IAAA,UACb;EAED;IAAA;IAAA;IAAA;EAAA,QAAa;EAGd,oBACC;IAAA,wBACC;MAAA,uBACC,QAAC,UAAU;QAAC,OAAO,EAAC,IAAI;QAAA,UAAC;MAAQ;QAAA;QAAA;QAAA;MAAA;IAAa;MAAA;MAAA;MAAA;IAAA,QACzC,EAELL,QAAQ,CAACM,GAAG,CAACC,OAAO,IAAI;MACxB,IAAIA,OAAO,CAACC,IAAI,KAAKT,IAAI,CAACS,IAAI,EAAE;QAC/B,oBACC,QAAC,GAAG;UAAmB,EAAE,EAAE;YAC1BC,OAAO,EAAE,MAAM;YAAEC,UAAU,EAAE,YAAY;YACzCC,cAAc,EAAE,UAAU;YAAEC,EAAE,EAAE;UACjC,CAAE;UAAA,wBACD,QAAC,GAAG;YAAC,EAAE,EAAE;cAAEC,KAAK,EAAE,CAAC,GAAG;YAAE,CAAE;YAAA,uBACzB,QAAC,KAAK;cAAC,EAAE,EAAE;gBAAEC,EAAE,EAAE,CAAC;gBAAEC,UAAU,EAAE;cAAqB,CAAE;cAAA,uBACtD,QAAC,UAAU;gBAAC,EAAE,EAAE;kBAAEV,CAAC,EAAE;gBAAE,CAAE;gBAAA,UAAEE,OAAO,CAACS;cAAI;gBAAA;gBAAA;gBAAA;cAAA;YAAc;cAAA;cAAA;cAAA;YAAA;UAC9C;YAAA;YAAA;YAAA;UAAA,QACH,eACN,QAAC,GAAG;YAAC,EAAE,EAAE;cAAEF,EAAE,EAAE,CAAC;cAAEG,EAAE,EAAE;YAAE,CAAE;YAAA,uBACzB,QAAC,QAAQ;cAAC,QAAQ,EAAEV,OAAO,CAACC,IAAK;cAAC,KAAK,EAAEb,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEuB,WAAW,CAAC,cAAc;YAAE;cAAA;cAAA;cAAA;YAAA;UAAG;YAAA;YAAA;YAAA;UAAA,QAChF;QAAA,GAXGX,OAAO,CAACY,GAAG;UAAA;UAAA;UAAA;QAAA,QAYf;MAER,CAAC,MAAM;QACN,IAAIC,mBAAmB,GAAG1B,WAAW,CAAC2B,IAAI,CAACtB,IAAI,IAAIA,IAAI,CAACuB,QAAQ,KAAKf,OAAO,CAACC,IAAI,CAAC;QAClF,IAAI,CAACY,mBAAmB,EAAE,OAAO,IAAI;QACrC,IAAIF,WAAW,GAAGE,mBAAmB,aAAnBA,mBAAmB,uBAAnBA,mBAAmB,CAAEG,YAAY;QACnD,oBACC,QAAC,GAAG;UAAmB,EAAE,EAAE;YAC1Bd,OAAO,EAAE,MAAM;YAAEC,UAAU,EAAE,YAAY;YACzCC,cAAc,EAAE,YAAY;YAAEC,EAAE,EAAE;UACnC,CAAE;UAAA,wBACD,QAAC,GAAG;YAAC,EAAE,EAAE;cAAEE,EAAE,EAAE;YAAE,CAAE;YAAA,uBAClB,QAAC,QAAQ;cAAC,QAAQ,EAAEP,OAAO,CAACC,IAAK;cAAC,KAAK,EAAEU;YAAY;cAAA;cAAA;cAAA;YAAA;UAAG;YAAA;YAAA;YAAA;UAAA,QACnD,eACN,QAAC,GAAG;YAAC,EAAE,EAAE;cAAEL,KAAK,EAAE,CAAC,GAAG;YAAE,CAAE;YAAA,uBACzB,QAAC,KAAK;cAAC,EAAE,EAAE;gBAAEC,EAAE,EAAE,CAAC;gBAAEC,UAAU,EAAE;cAAqB,CAAE;cAAA,uBACtD,QAAC,UAAU;gBAAC,EAAE,EAAE;kBAAEV,CAAC,EAAE;gBAAE,CAAE;gBAAA,UAAEE,OAAO,CAACS;cAAI;gBAAA;gBAAA;gBAAA;cAAA;YAAc;cAAA;cAAA;cAAA;YAAA;UAC9C;YAAA;YAAA;YAAA;UAAA,QACH;QAAA,GAXGT,OAAO,CAACY,GAAG;UAAA;UAAA;UAAA;QAAA,QAYf;MAER;IACD,CAAC,CAAC;EAAA,gBACA;AAEL,CAAC;AAAA,GAxEK1B,QAAQ;EAAA,QACOT,WAAW,EAClBA,WAAW,EACXA,WAAW,EACPA,WAAW,EACXC,WAAW;AAAA;AAAA,KALvBQ,QAAQ;AA0Ed,eAAeA,QAAQ;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}